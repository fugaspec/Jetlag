<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Arrival — Flight Board</title>

<style>
.ticket-box {
  width: 100%;
  max-width: 600px;        /* PC表示時の最大幅 */
  aspect-ratio: 3 / 2;     /* 縦横比を固定 */
  margin: 0 auto;          /* 中央寄せ */
  background: #111;        /* 背景色（必要に応じて変更） */
  border-radius: 8px;      /* デザイン調整（お好みで） */
  overflow: hidden;        /* はみ出し防止 */
}

/* 中の要素が縦横比内に収まるよう調整 */
.ticket-box * {
  box-sizing: border-box;
}

/* スマホ画面用（幅768px以下） */
@media (max-width: 768px) {
  .ticket-box {
    transform: scale(0.8);        /* 縮小表示 */
    transform-origin: top center; /* 上中央を基準に縮小 */
  }
}

/* さらに小さい画面（幅480px以下） */
@media (max-width: 480px) {
  .ticket-box {
    transform: scale(0.65);
    transform-origin: top center;
  }
}
</style>



<style>
/* === Responsive safeguards === */
:root{
  --bg:#e6e6e6;
  --banner:#4f4f4f;
  --panel:#1e1f22;
  --panel-edge:#101114;
  --grid:#2a2c30;
  --text:#f1f1f1;
  --muted:#a0a0a0;
  --accent:#0bd46e;
  --warning:#ffd166;
  --danger:#ff5b5b;
  --safe-top: env(safe-area-inset-top, 0px);
}
*{box-sizing:border-box}
html,body{
  height:100%;margin:0;
  max-width:100%;overflow-x:hidden;
}
body{
  background:var(--bg); color:#111;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Sans", "Noto Sans JP", sans-serif;
  display:flex; flex-direction:column;
}

/* Top banner (quote) */
.banner{
  background:var(--banner); color:#fff;
  padding: calc(8px + var(--safe-top)) 16px 10px;
  font-size: clamp(12px, 2.8vw, 14px);
  line-height:1.55; text-align:center;
}

/* Layout */
.wrap{ width:min(94vw,540px); margin:20px auto 40px; padding:0 12px; }

/* Flight board */
.board{
  background:linear-gradient(180deg,var(--panel) 0%,#191a1d 100%);
  border:1px solid #0b0c0f;
  border-radius:16px;
  box-shadow:0 14px 32px rgba(0,0,0,.20), inset 0 0 0 1px var(--panel-edge);
  padding:16px;
}
.board-head{
  display:flex;align-items:center;justify-content:space-between;
  color:var(--text);padding:6px 6px 10px;gap:8px;
  font-weight:600;letter-spacing:.3px;
}
.board-title{ font-size:clamp(18px,4.5vw,22px); }
.status-pill{
  font-size:12px;font-weight:700;
  color:#0a0;background:rgba(11,212,110,.14);
  border:1px solid rgba(11,212,110,.45);
  padding:6px 10px;border-radius:999px;
}

/* Grid */
.grid{
  display:grid;
  grid-template-columns:120px 1fr 1fr 120px 130px;
  border-top:1px solid #0f1114;
  border-bottom:1px solid #0f1114;
  width:100%;max-width:100%;overflow-x:hidden;
}
.cell{
  border-right:1px solid var(--grid);
  padding:10px 12px;color:var(--text);
  display:flex;align-items:center;min-height:48px;
}
.cell:last-child{border-right:0}
.th{font-size:12px;text-transform:uppercase;color:#c9cdd4;letter-spacing:.2px}

/* Split-flap */
.flap{
  display:inline-grid;grid-auto-flow:column;gap:2px;
  background:#0f1114;border-radius:6px;padding:2px 4px;
  border:1px solid #0a0b0e;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.05);
  font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
}
.flap .tile{
  position:relative;width:14px;height:22px;
  background:#1c1f23;border-radius:3px;border:1px solid #0d0f12;
  color:#f5f6f8;font-size:14px;line-height:22px;text-align:center;
  box-shadow:inset 0 -2px 0 rgba(0,0,0,.35);overflow:hidden;
}
.tile::before,.tile::after{
  content:"";position:absolute;left:0;right:0;height:1px;background:#0a0b0e;
}
.tile::before{top:50%;opacity:.65}
.row{border-top:1px solid var(--grid)}

/* Email */
.email-row .cell{align-items:stretch}
.email-box{display:flex;gap:8px;width:100%;flex-wrap:wrap}
.email-input{flex:1;min-width:0;width:100%}
input[type="email"]{
  width:100%;padding:12px 14px;
  background:#0f1114;border:1px solid #0a0b0e;
  color:#e9ecf1;border-radius:8px;outline:none;font-size:15px;
}
input::placeholder{color:#7b808a}
.btn{
  padding:12px 16px;background:#111316;color:#fff;
  border:1px solid #0a0b0e;border-radius:8px;cursor:pointer;
  font-weight:700;letter-spacing:.3px;
  white-space:nowrap;width:100%;margin-top:8px;
}
.btn:hover{filter:brightness(1.05)}
.btn:disabled{opacity:.6;cursor:not-allowed}

.hint{color:var(--muted);font-size:12px;margin-top:10px}

/* Toast */
.toast{
  position:fixed;left:50%;bottom:26px;transform:translateX(-50%);
  background:#000;color:#fff;padding:10px 14px;border-radius:999px;font-size:14px;
  opacity:0;transition:.25s;pointer-events:none;
}
.toast.show{opacity:1}

/* Responsive grid */
@media(max-width:720px){
  .grid{grid-template-columns:80px 1fr 1fr 92px 88px;}
  .cell{min-height:44px;padding:8px 10px}
}
@media(max-width:480px){
  .wrap{width:min(96vw,420px);}
  .grid{grid-template-columns:70px 1fr 1fr 84px 80px;}
  .flap .tile{width:11px;height:18px;font-size:12px;line-height:18px;}
  .board-head{flex-wrap:wrap;gap:8px}
  input[type="email"]{font-size:16px} /* iOSズーム抑止 */
}
</style>
</head>
<body>

  <div class="wrap">
    <div class="board" role="region" aria-label="Flight-style board">
      <div class="board-head">
        <div class="board-title">The Perfect Jet Lag</div>
        <div class="status-pill" id="clock">JST --:--</div>
      </div>

      <div class="grid" role="table">
        <div class="cell th">FLIGHT</div>
        <div class="cell th">FROM</div>
        <div class="cell th">TO</div>
        <div class="cell th">ARRIVAL</div>
        <div class="cell th">STATUS</div>

        <div class="cell"><div class="flap" data-text="-"></div></div>
        <div class="cell"><div class="flap" data-text="Tokyo"></div></div>
        <div class="cell"><div class="flap" data-text="-"></div></div>

        <div class="cell th">TICKET</div>
        <div class="cell email-row" style="grid-column: span 4;">
          <div class="email-box">
            <div class="email-input">
              <input id="email" type="email" placeholder="e-mail" autocomplete="email" required>
            </div>
            <button id="submitBtn" class="btn">submit</button>
          </div>
        </div>
      </div>

      <div class="hint">Cooperated with Genelec Japan</div>
    </div>
  </div>

  <div class="toast" id="toast">送信しました。</div>

<script>
const clockEl=document.getElementById('clock');
function tickClock(){
  const jst=new Date().toLocaleTimeString("ja-JP",{timeZone:"Asia/Tokyo",hour:"2-digit",minute:"2-digit"});
  clockEl.textContent=`JST ${jst}`;
}
setInterval(tickClock,1000);tickClock();

const CHARS=" 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ:-";
function buildFlap(el){
  const text=(el.getAttribute('data-text')||"").toUpperCase();
  el.innerHTML="";
  [...text].forEach(ch=>{
    const tile=document.createElement('div');
    tile.className='tile';
    tile.dataset.target=CHARS.includes(ch)?ch:' ';
    tile.textContent=' ';
    el.appendChild(tile);
  });
}
function flapTo(el,newText,delay=40){
  const tiles=el.querySelectorAll('.tile');
  const chars=(newText.toUpperCase()).padEnd(tiles.length,' ').split('');
  tiles.forEach((tile,idx)=>{
    const target=CHARS.indexOf(chars[idx]||' ');
    let cur=CHARS.indexOf(tile.textContent);
    if(cur<0)cur=0;
    const steps=(target-cur+CHARS.length)%CHARS.length;
    for(let s=1;s<=steps;s++){
      setTimeout(()=>{
        const next=CHARS[(cur+s)%CHARS.length];
        tile.textContent=next;
      },delay*(idx+s));
    }
    tile.dataset.target=chars[idx];
  });
}
document.querySelectorAll('.flap').forEach(buildFlap);
setTimeout(()=>{document.querySelectorAll('.flap').forEach(el=>flapTo(el,el.getAttribute('data-text')));},200);

const email=document.getElementById('email');
const btn=document.getElementById('submitBtn');
const toast=document.getElementById('toast');
function showToast(msg){toast.textContent=msg;toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),2000);}
async function submitEmail(){
  const v=email.value.trim();
  if(!v){showToast('e-mail を入力してください');email.focus();return;}
  if(!/^\S+@\S+\.\S+$/.test(v)){showToast('e-mail の形式を確認してください');email.focus();return;}
  btn.disabled=true;
  try{
    const res=await fetch('/api/submit',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:v})});
    const j=await res.json().catch(()=>({}));
    if(!res.ok)throw new Error(j?.error||'送信に失敗しました');
    showToast('送信しました');email.value='';
  }catch(err){showToast(err?.message||'エラーが発生しました');}
  finally{btn.disabled=false;}
}
btn.addEventListener('click',submitEmail);
email.addEventListener('keydown',e=>{if(e.key==='Enter'){e.preventDefault();submitEmail();}});
</script>
</body>
</html>